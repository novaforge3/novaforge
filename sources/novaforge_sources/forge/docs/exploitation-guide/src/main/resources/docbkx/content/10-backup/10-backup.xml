<?xml version="1.0" encoding="UTF-8"?>
<!--
  * Copyright (c) 2011-2015, BULL SAS, NovaForge Version 3 and above.
  *
  * This file is free software: you may redistribute and/or modify it under
  * the terms of the GNU Affero General Public License as published by the
  * Free Software Foundation, version 3 of the License.
  *
  * This file is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty
  * of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  * See the GNU Affero General Public License for more details.
  * You should have received a copy of the GNU Affero General Public License
  * along with this program. If not, see http://www.gnu.org/licenses.
  *
  * Additional permission under GNU AGPL version 3 (AGPL-3.0) section 7.
  *
  * If you modify this Program, or any covered work, by linking or combining
  * it with libraries listed in COPYRIGHT file at the top-level directory of
  * this distribution (or a modified version of that libraries), containing parts
  * covered by the terms of licenses cited in the COPYRIGHT file, the licensors
  * of this Program grant you additional permission to convey the resulting work.
  -->
<chapter
    version="5.0"
    xml:lang="fr"
    xmlns="http://docbook.org/ns/docbook"
    >
  
  <title>Procédure de sauvegarde et restauration</title>
  <sect1>
    <title>Validité de la procédure</title>
    <para>
      La procédure présentée est celle préconisée par l'équipe NovaForge pour garantir la
      sauvegarde des données et la capacité ultérieur de restauration pour NovaForge 
      pouvant être composé d'une ou de plusieurs forges.
      </para>
  </sect1>
  <sect1>
    <title>Procédure de sauvegarde </title>
    <para>
      Les étapes suivantes doivent être respectées :
      <orderedlist>
        <listitem>
          Appliquez les procédures d'arrêt de vos forges (y compris des noeuds serveurs
          d'applications distribuées)
        </listitem>
        <listitem>
          Validez le bon fonctionnement de ces procédures en vérifiant les erreurs et la
          disparition des processus
        </listitem>
        <listitem>
          Effectuez une sauvegarde du répertoire $NOVA_HOME qui est par défaut
          /datas/novaforge3 sur tous les serveurs composants votre système NovaForge. La
          sauvegarde doit préserver les attributs mode,ownership,timestamps
        </listitem>
        <listitem>
          Appliquez les procédures de démarrage de vos forges
        </listitem>
      </orderedlist>
    </para>
  </sect1>

  <sect1>
    <title>Procédure de restauration</title>
    <para>
      Les étapes suivantes doivent être respectées :
      <orderedlist>
        <listitem>
          Appliquez les procédures d'arrêt de vos forges (y compris des noeuds serveurs
          d'applications distribuées)
        </listitem>
        <listitem>
          Validez le bon fonctionnement de ces procédures en vérifiant les erreurs et la
          disparition des processus
        </listitem>
        <listitem>
          Effectuez une restauration du répertoire $NOVA_HOME qui est par défaut
          /datas/novaforge3 sur tous les serveurs composants votre système NovaForge. La
          restauration doit préserver les attributs mode,ownership,timestamps (La restauration d'un
          serveur indépendamment des autres serveurs de NovaForge n'est pas qualifiée par
          l'équipe NovaForge)
        </listitem>
        <listitem>
          Appliquez les procédures de démarrage de vos forges
        </listitem>
      </orderedlist>
    </para>
  </sect1>
   <sect1>
    <title>Procédure personnalisée de sauvegarde/restauration</title>
    <para>
      Le tableau ci-dessous peut vous aider dans l'établissement d'une procédure personnalisée de sauvegarde/restauration. Il est à noter que le tableau ci-dessous est donné à titre indicatif.
      Comme pour les procédures de sauvegarde/restauration précédentes, il faut respecter les différentes étapes d'arrêt et de démarrage de vos forges. 
      </para>
      <table id="storedFolders">
						<title id="storedFoldersXref">Répertoires</title>
						<tgroup cols="3">
							<thead>
								<row>
									<entry>Répertoires</entry>
									<entry>Dossiers</entry>
									<entry>Description</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry>$NOVA_HOME/datas</entry>
									<entry>Tous les dossiers et fichiers</entry>
									<entry>Contient les données liées à l'utilisation des produits</entry>
								</row>
								<row>
									<entry>$NOVA_HOME/engines/testlink</entry>
									<entry>
										<para>gui</para>
									</entry>
									<entry>Contient la configuration de l'outil (templates, ...)</entry>
								</row>
								<row>
									<entry>$NOVA_HOME/system/crt/</entry>
									<entry>*</entry>
									<entry>Contient les clefs et certificats SSL</entry>
								</row>
								<row>
									<entry>$NOVA_HOME/datas/sympa</entry>
									<entry>
										<para>bounce</para>
										<para>list_data</para>
										<para>arc</para>
									</entry>
									<entry>Contient les données applicatifs du produit sympa et sa configuration</entry>
								</row>
								<row>
									<entry>$NOVA_HOME/datas/dokuwiki</entry>
									<entry>
										<para>data/meta</para>
										<para>data/pages</para>
										<para>data/locks</para>
										<para>data/attic</para>
										<para>data/index</para>
										<para>data/cache</para>
									</entry>
									<entry>Contient les données applicatifs du produit dokuwiki et sa configuration</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
  </sect1>
</chapter>