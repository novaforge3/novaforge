<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Copyright (c) 2011-2015, BULL SAS, NovaForge Version 3 and above.
 *
 * This file is free software: you may redistribute and/or 
 * modify it under the terms of the GNU Affero General Public License
 * as published by the Free Software Foundation, version 3 of the License.
 *
 * This file is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty
 * of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Affero General Public License for more details.
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see http://www.gnu.org/licenses.
 *
 * Additional permission under GNU AGPL version 3 (AGPL-3.0) section 7
 *
 * If you modify this Program, or any covered work,
 * by linking or combining it with libraries listed
 * in COPYRIGHT file at the top-level directof of this
 * distribution (or a modified version of that libraries),
 * containing parts covered by the terms of licenses cited
 * in the COPYRIGHT file, the licensors of this Program
 * grant you additional permission to convey the resulting work.
-->
<section version="5.0" xml:lang="fr" xmlns="http://docbook.org/ns/docbook"
	xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude"
	xmlns:ns5="http://www.w3.org/2000/svg" xmlns:ns4="http://www.w3.org/1998/Math/MathML"
	xmlns:ns3="http://www.w3.org/1999/xhtml" xmlns:db="http://docbook.org/ns/docbook">
	<title>Gestionnaire de tests</title>
	<sect2>
		<title>Testlink</title>
		<sect3>
			<title>Description</title>
			<para>L'application PHP Testlink est installé en version 1.9.14. L'arrêt/relance est entièrement géré par le serveur
				web. Testlink est installé dans le dossier : </para>
			<programlisting language="shell"># $NOVA_HOME/engines/testlink</programlisting>
		</sect3>
		<sect3>
			<title>Fichiers de logs</title>
			<para>Les enregistrements de journaux associés à Testlink sont liés
				au serveur web vu précédemment.</para>
		</sect3>
		<sect3>
			<title>Description des fichiers de configuration du plugin</title>
			<emphasis>plugins.testlink.cfg</emphasis>
			<itemizedlist>
				<listitem>clientAdmin: login de l'administrateur Testlink</listitem>
				<listitem>clientPwd: mot de passe de l'administrateur Testlink</listitem>
				<listitem>clientEndPoint: endpoint XML/RPC de Testlink </listitem>
				<listitem>defaultToolUrl: URL de base d'accès de Testlink dans la forge</listitem>
				<listitem>adminAccess : URL d'accès de l'administration de Testlink
					dans la forge</listitem>								
			</itemizedlist>
		</sect3>

		<sect3>
			<title>Création d'Exigences dans Testlink</title>
			<para>Par défaut, la création d'exigence est désactivée dans la forge.
				Pour l'activer, modifier les fichiers PHP suivant (la manipulation
				peut se faire à chaud, la forge n'a pas besoin d'être arrêtée):
			</para>

			<para>Dans le fichier project_req_spec_mgmt.tpl :</para>

<programlisting language="shell"># vi $NOVA_HOME/engines/testlink/gui/templates/
requirements/project_req_spec_mgmt.tpl</programlisting>

			<para>Ajouter deux balises inputs :</para>

<programlisting language="html"><![CDATA[<form method="post">
<input type="button" id="new_req_spec" name="new_req_spec"
	value="{$labels.btn_new_req_spec}" 
	onclick="location='{$req_spec_new_url}{$gui->tproject_id}'" />

<input type="button" id="export_all" name="export_all"
	value="{$labels.btn_export_all_reqspec}" 
	onclick="location='{$req_export_url}{$gui->tproject_id}'" />

<input type="button" id="import_all" name="import_all"
	value="{$labels.btn_import}" 
	onclick="location='{$req_import_url}{$gui->tproject_id}'" />
</form>
]]></programlisting>

			<para>Dans le fichier reqSpecView.php :</para>

			<programlisting language="shell"># vi $NOVA_HOME/engines/testlink/lib/requirements/reqSpecView.php</programlisting>

			<para>Ajouter après $gui->grants = new stdClass(); :</para>

			<programlisting language="shell">
				$gui->grants = new stdClass();
				$gui->grants->req_mgmt = has_rights($db,"mgt_modify_req");
				$gui->req_spec = $req_spec_mgr->get_by_id($argsObj->req_spec_id);
			</programlisting>

			<para>Dans le fichier reqView.php :</para>

			<programlisting language="shell">
				# vi $NOVA_HOME/engines/testlink/lib/requirements/reqView.php
			</programlisting>

			<para>Modifier après $gui->grants = new stdClass(); :</para>

			<programlisting language="shell">
				$gui->grants = new stdClass();
				$gui->grants->req_mgmt = has_rights($dbHandler,"mgt_modify_req");
			</programlisting>

		</sect3>

	</sect2>
</section>
