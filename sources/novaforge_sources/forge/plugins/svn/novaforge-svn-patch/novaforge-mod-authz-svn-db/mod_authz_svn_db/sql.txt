SELECT repository_paths.path AS repository_path, user_permissions.read, user_permissions.write, user_permissions.recursive FROM repositories INNER JOIN repository_paths ON repository_paths.repository_id = repositories.id AND repositories.name = '' INNER JOIN user_permissions ON user_permissions.repository_path_id = repository_paths.id INNER JOIN users ON users.id = user_permissions.user_id AND users.name = '' UNION SELECT repository_paths.path AS repository_path, group_permissions.read, group_permissions.write, group_permissions.recursive FROM repositories INNER JOIN repository_paths ON repository_paths.repository_id = repositories.id AND repositories.name = '' INNER JOIN group_permissions ON group_permissions.repository_path_id = repository_paths.id INNER JOIN group_memberships ON group_memberships.group_id = group_permissions.group_id INNER JOIN users ON users.id = group_memberships.user_id AND users.name = '' ORDER BY repository_path DESC
